<?xml version="1.0" encoding="utf-8" ?>
<SmartSqlMap Scope="T_Table"  xmlns="http://SmartSql.net/schemas/SmartSqlMap.xsd">
  <Statements>
    <Statement Id="QueryParams">
      Where 1=1
    </Statement>
    
    <Statement Id="Insert">
      INSERT INTO T_Test
      ([Name])
      VALUES
      (@Name)

      ;Select @@IDENTITY
    </Statement>
    
    <Statement Id="Delete">
      Delete T_Test
      Where Id=@Id
    </Statement>
    
    <Statement Id="Update">
      Update T_Test
      Set Name=@Name
      Where Id=@Id
    </Statement>
    
    <Statement Id="GetList">
      Select Top 10 T.* From T_Test T
      <Include RefId="QueryParams"/>
      Order By Id Desc
    </Statement>
    
    <Statement Id="GetListByPage">
      Select TT.* From
      (Select ROW_NUMBER() Over(Order By T.Id DESC) Row_Index,T.* From T_Role T With(NoLock)
      <Include RefId="QueryParams"/>) TT
      Where TT.Row_Index Between ((#PageIndex#-1)*#PageSize#+1) And (#PageIndex#*#PageSize#)
    </Statement>
    
    <Statement Id="GetRecord">
      Select Count(1) From T_Test T With(NoLock)
      <Include RefId="QueryParams"/>
    </Statement>
    
    <Statement Id="GetEntity">
      Select Top 1 T.* From T_Test T With(NoLock)
      Where 1=1
      <IsNotEmpty Prepend="And" Property="Id">
        T.Id=#Id#
      </IsNotEmpty>
    </Statement>
    
    <Statement Id="IsExist">
      Select Count(1) From T_Test T With(NoLock)
      <Include RefId="QueryParams"/>
    </Statement>
    
  </Statements>
</SmartSqlMap>
